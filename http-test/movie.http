### Cinema REST API - Movie Endpoints Testing

@baseUrl = http://localhost:8080
@contentType = application/json


### 

# CREATE MOVIE - Happy Path


### 


### Create a valid movie

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "A computer hacker learns from mysterious rebels about the true nature of his reality and his role in the war against its controllers.",
  "durationMinutes": 136,
  "genre": "Sci-Fi",
  "releaseDate": "1999-03-31",
  "title": "The Matrix"
}


### Create another movie for testing search

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "A thief who steals corporate secrets through the use of dream-sharing technology.",
  "durationMinutes": 148,
  "genre": "Sci-Fi",
  "releaseDate": "2010-07-16",
  "title": "Inception"
}


### Create movie with minimal required fields

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "durationMinutes": 169,
  "genre": "Sci-Fi",
  "releaseDate": "2014-11-07",
  "title": "Interstellar"
}


### 

# CREATE MOVIE - Validation Errors (should return 400)


### 


### Create movie with blank title (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Test description",
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": ""
}


### Create movie with null title (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Test description",
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate": "2020-01-01"
}


### Create movie with negative duration (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Test description",
  "durationMinutes": -10,
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": "Invalid Movie"
}


### Create movie with zero duration (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Test description",
  "durationMinutes": 0,
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": "Invalid Movie"
}


### Create movie with null duration (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Test description",
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": "Invalid Movie"
}


### Create movie with blank genre (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Test description",
  "durationMinutes": 120,
  "genre": "",
  "releaseDate": "2020-01-01",
  "title": "Invalid Movie"
}


### Create movie with null release date (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Test description",
  "durationMinutes": 120,
  "genre": "Action",
  "title": "Invalid Movie"
}


### Create movie with future release date (should fail if @PastOrPresent is working)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Test description",
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate": "2030-12-31",
  "title": "Future Movie"
}


### Create movie with description exceeding 5000 characters (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.  Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum...  (repeat this 50+ times to exceed 5000 chars)",
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": "Long Description Movie"
}


### Create movie with title exceeding 255 characters (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Test description",
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": "This is a very long title that exceeds the maximum allowed length of 255 characters. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam quis nostrud exercitation ullamco"
}


### Create movie with malformed JSON (should fail)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "title": "Invalid JSON"
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate":  "2020-01-01"
}


### 

# CREATE MOVIE - Duplicate (should return 409 Conflict)


### 


### Try to create duplicate movie (same title and release date)

# First run the "Create a valid movie" request above, then run this

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "title": "The Matrix",
  "durationMinutes": 136,
  "genre": "Sci-Fi",
  "releaseDate": "1999-03-31",
  "description": "Duplicate movie test"
}


### 

# GET MOVIE BY ID


### 


### Get movie by ID (replace {id} with actual ID from create response)

GET {{baseUrl}}/movies/1 HTTP/1.1


### Get movie by non-existent ID (should return 404)

GET {{baseUrl}}/movies/99999 HTTP/1.1


### Get movie by invalid ID format (should return 400)

GET {{baseUrl}}/movies/abc HTTP/1.1


### Get movie by zero ID (should return 404 or 400 depending on validation)

GET {{baseUrl}}/movies/0 HTTP/1.1


### Get movie by negative ID (should return 404 or 400 depending on validation)

GET {{baseUrl}}/movies/-1 HTTP/1.1


### 

# SEARCH MOVIES


### 


### Get all movies (no filters)

GET {{baseUrl}}/movies HTTP/1.1


### Search by title

GET {{baseUrl}}/movies?title=Matrix HTTP/1.1


### Search by title (case insensitive test)

GET {{baseUrl}}/movies?title=matrix HTTP/1.1


### Search by title (partial match test)

GET {{baseUrl}}/movies?title=Inter HTTP/1.1


### Search by genre

GET {{baseUrl}}/movies?genre=Sci-Fi HTTP/1.1


### Search by genre (case insensitive test)

GET {{baseUrl}}/movies?genre=sci-fi HTTP/1.1


### Search by title and genre

GET {{baseUrl}}/movies?title=Matrix&genre=Sci-Fi HTTP/1.1


### Search with no results

GET {{baseUrl}}/movies?title=NonExistentMovie HTTP/1.1


### Search with empty title parameter

GET {{baseUrl}}/movies?title= HTTP/1.1


### Search with empty genre parameter

GET {{baseUrl}}/movies?genre= HTTP/1.1


### 

# UPDATE MOVIE


### 


### Update existing movie (replace {id} with actual ID)

PUT {{baseUrl}}/movies/1 HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Updated description for The Matrix",
  "durationMinutes": 140,
  "genre": "Sci-Fi/Action",
  "releaseDate": "1999-03-31",
  "title": "The Matrix (Updated)"
}


### Update movie with partial data (all fields still required due to @Valid)

PUT {{baseUrl}}/movies/1 HTTP/1.1
Content-Type: {{contentType}}

{
  "durationMinutes": 136,
  "genre": "Sci-Fi",
  "releaseDate": "1999-03-31",
  "title": "The Matrix (Partial Update)"
}


### Update non-existent movie (should return 404)

PUT {{baseUrl}}/movies/99999 HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "This should fail",
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": "Non-existent Movie"
}


### Update with invalid data - blank title (should return 400)

PUT {{baseUrl}}/movies/1 HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Invalid update",
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": ""
}


### Update with invalid data - negative duration (should return 400)

PUT {{baseUrl}}/movies/1 HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Invalid update",
  "durationMinutes": -50,
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": "Valid Title"
}


### Update with invalid data - future release date (should return 400)

PUT {{baseUrl}}/movies/1 HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Invalid update",
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate": "2030-12-31",
  "title": "Valid Title"
}


### Update with invalid ID format (should return 400)

PUT {{baseUrl}}/movies/abc HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Invalid ID test",
  "durationMinutes": 120,
  "genre": "Action",
  "releaseDate": "2020-01-01",
  "title": "Valid Title"
}


### 

# BOUNDARY VALUE TESTS


### 


### Create movie with minimum valid duration (1)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Testing minimum duration",
  "durationMinutes": 1,
  "genre": "Short",
  "releaseDate": "2020-01-01",
  "title": "Min Duration Movie"
}


### Create movie with very long valid description (close to 5000 chars)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.",
  "durationMinutes": 120,
  "genre": "Drama",
  "releaseDate": "2020-01-01",
  "title": "Long Description Test"
}


### Create movie with exactly 255 character title

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Boundary test",
  "durationMinutes": 120,
  "genre": "Test",
  "releaseDate": "2020-01-01",
  "title": "This title is exactly 255 characters long AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
}


### Create movie with single character title (minimum valid)

POST {{baseUrl}}/movies HTTP/1.1
Content-Type: {{contentType}}

{
  "description": "Single character title test",
  "durationMinutes": 120,
  "genre": "Test",
  "releaseDate": "2020-01-01",
  "title": "A"
}


### 

# HTTP METHOD ERRORS


### 


### Test DELETE method (should return 405 Method Not Allowed if not implemented)

DELETE {{baseUrl}}/movies/1 HTTP/1.1


### Test PATCH method (should return 405 Method Not Allowed if not implemented)

PATCH {{baseUrl}}/movies/1 HTTP/1.1
Content-Type: {{contentType}}

{
  "title": "Patched Title"
}


### 

# INVALID ENDPOINTS


### 


### Test invalid path (should return 404)

GET {{baseUrl}}/movie HTTP/1.1


### Test invalid nested path (should return 404)

GET {{baseUrl}}/movies/1/invalid HTTP/1.1
